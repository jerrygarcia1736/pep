{% extends "base.html" %}
{% block title %}Compare Peptides{% endblock %}
{% block content %}
<div class="d-flex align-items-center justify-content-between mb-3">
  <div>
    <h1 class="h3 mb-1">Compare</h1>
    <div class="text-muted">Select peptides to compare side-by-side</div>
  </div>
</div>

<form method="get" action="{{ url_for('compare') }}">
  <div class="row g-4">
    {% for p in peptides %}
    <div class="col-12 col-md-6 col-lg-3">
      <div class="card h-100 shadow-sm peptide-card">
        <div class="card-body">
          <div class="peptide-hero {% if not p.image_filename %}no-img{% endif %}">
            {% if p.image_filename %}
              <img loading="lazy"
                   src="{{ url_for('static', filename='img/peptides/' ~ p.image_filename) }}"
                   alt="{{ p.name }}"
                   onerror="this.remove(); this.parentElement.classList.add('no-img');">
            {% endif %}
          </div>

          <h3 class="h5 mt-3 mb-1">{{ p.name }}</h3>
          <div class="text-muted mb-2">{{ p.common_name or "" }}</div>

          <div class="text-muted small mb-2">
            {{ (p.benefits or p.notes or "")[:120] }}{% if (p.benefits or p.notes or "")|length > 120 %}…{% endif %}
          </div>

          <div class="d-flex flex-wrap gap-2 mb-2">
            {% if p.route %}<span class="badge bg-primary">{{ p.route }}</span>{% endif %}
            {% if p.typical_dose_mcg_min and p.typical_dose_mcg_max %}
              <span class="badge bg-secondary">{{ p.typical_dose_mcg_min }}-{{ p.typical_dose_mcg_max }} mcg</span>
            {% endif %}
          </div>

          <div class="compare-row mt-3">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" name="ids" value="{{ p.id }}" id="cmp{{ p.id }}">
              <label class="form-check-label" for="cmp{{ p.id }}">Compare</label>
            </div>
            <a class="btn btn-sm btn-outline-primary" href="{{ url_for('peptide_detail', peptide_id=p.id) }}">
              View Details →
            </a>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</form>
{% endblock %}
